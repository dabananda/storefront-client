<div class="py-8">
  <header class="mb-8 text-center">
    <h1 class="text-3xl font-bold text-gray-900 tracking-tight sm:text-4xl">
      Latest Products
    </h1>
    <p class="mt-2 text-lg text-gray-600 max-w-2xl mx-auto">
      Discover our curated collection of premium items.
    </p>
  </header>

  <div class="max-w-md mx-auto mb-10 relative">
    <input type="text" [(ngModel)]="searchQuery" (keyup.enter)="onSearch()" placeholder="Search products..."
      class="w-full px-4 py-3 rounded-full border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none pl-12 shadow-sm transition-all">
    <svg class="w-5 h-5 text-gray-400 absolute left-4 top-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
        d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
    </svg>
    <button (click)="onSearch()"
      class="cursor-pointer absolute right-2 top-2 bg-indigo-600 text-white px-4 py-1.5 rounded-full text-sm font-medium hover:bg-indigo-700 transition-colors">
      Search
    </button>
  </div>

  @if (isLoading()) {
  <div class="flex justify-center items-center py-20">
    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
  </div>
  }

  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 xl:gap-8 mb-12">
    @for (product of products(); track product.id) {
    <app-product-card [product]="product" />
    } @empty {
    @if (!isLoading()) {
    <div class="col-span-full text-center py-12">
      <p class="text-gray-500 text-lg">No products found matching your search.</p>
    </div>
    }
    }
  </div>

  @if (!isLoading() && products().length > 0) {
  <div class="flex justify-center items-center space-x-4">
    <button (click)="prevPage()" [disabled]="currentPage() === 0"
      class="cursor-pointer px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
      Previous
    </button>

    <span class="text-sm text-gray-700">
      Page <span class="font-medium">{{ currentPage() + 1 }}</span> of <span class="font-medium">{{ totalPages()
        }}</span>
    </span>

    <button (click)="nextPage()" [disabled]="currentPage() >= totalPages() - 1"
      class="cursor-pointer px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
      Next
    </button>
  </div>
  }
</div>